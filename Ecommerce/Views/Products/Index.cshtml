@model List<Ecommerce.Models.ProductsViewModel>
@{
    ViewBag.Title = "All Records";
}

<h2 class="recordsHeading">Everything sounds better on vinyl.</h2>

<div class="container-fluid">
    <div class="row">
        @foreach (var product in Model)
        {
            <div class="col-md-3">
                <a href="/products/details/@(product.Id)">
                    <img src="@Url.Content("~/Content/" + product.ImgUrl)" alt="@product.Title" class="img-fluid img-thumbnail" />
                    <h3>@(product.Title)</h3>
                    <p>@(product.Artist)</p>
                    <p>@(product.Price)</p>
                    <p>@(product.Stock > 0?"In stock":"Out of stock")</p>
                </a>
                <!-- add if in stock. What if product sold out when cart turns to order? -->
                @using (Html.BeginForm("AddToCart", "Cart"))
                { 
                    <input type="hidden" name="productId" value="@(product.Id)" />
                    <input type="number" name="orderQty" value="1" />
                    <input type="Submit" value="Add to Cart"/>
                }
                <p>@Html.ValidationMessage("CustomError")</p>
            </div>
        }
    </div>
</div>